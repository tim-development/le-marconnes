@using LeMarconnes.DTOs.Admin
@model AdminReservationDto
@using System.Text.Json

@{
    ViewData["Title"] = "Reservering Details";
    Layout = "_Layout";

    var nachten = (Model.CheckOutDate - Model.CheckInDate).Days;
    if (nachten <= 0) nachten = 1;

    decimal prijsPerNacht = Model.Accommodation?.RatePerNight ?? 0;
    decimal verblijfskosten = nachten * prijsPerNacht;
    decimal totaal = verblijfskosten + Model.TouristTax - Model.Discount;
}

<div class="container my-5 text-dark">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/Admins/Reservations" class="text-dark">Reserveringen</a></li>
            <li class="breadcrumb-item active">Details #@Model.Id</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-md-8">
            <div class="card border-0 shadow-sm rounded-0 mb-4">
                <div class="card-header bg-dark text-white rounded-0 py-3">
                    <h5 class="mb-0 serif">Informatie</h5>
                </div>
                <div class="card-body p-4">
                    <div class="row mb-3">
                        <div class="col-sm-4 text-muted">Accommodatie</div>
                        <div class="col-sm-8 fw-bold">@(Model.Accommodation?.Name ?? "Onbekend")</div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4 text-muted">Gast (User ID)</div>
                        <div class="col-sm-8"><code>@Model.UserId</code></div>
                    </div>
                    <hr />
                    <div class="row mb-3">
                        <div class="col-sm-4 text-muted">Periode</div>
                        <div class="col-sm-8">
                            @Model.CheckInDate.ToString("dd MMM yyyy") - @Model.CheckOutDate.ToString("dd MMM yyyy")
                            <span class="badge bg-light text-dark ms-2">@nachten nachten</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-0 shadow-sm rounded-0 border-top border-primary border-4">
                <div class="card-header bg-white py-3"><h5 class="mb-0 serif">Financieel</h5></div>
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between mb-2">
                        <span>Verblijf (@nachten x €@prijsPerNacht)</span>
                        <span>€@verblijfskosten.ToString("N2")</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Toeristenbelasting</span>
                        <span>€@Model.TouristTax.ToString("N2")</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2 text-danger">
                        <span>Korting</span>
                        <span>-€@Model.Discount.ToString("N2")</span>
                    </div>
                    <hr />
                    <div class="d-flex justify-content-between fw-bold fs-4 text-primary">
                        <span>Totaal</span>
                        <span>€@totaal.ToString("N2")</span>
                    </div>
                </div>
                <div class="card-footer bg-light p-3 border-0">
                    <div class="d-grid gap-2">
                        <a href="/Admins/Reservations" class="btn btn-outline-dark rounded-0">Overzicht</a>
                        <a href="/Admins/Reservations/Delete/@Model.Id" class="btn btn-danger rounded-0">Verwijderen</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>